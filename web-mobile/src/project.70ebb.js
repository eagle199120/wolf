window.__require=function t(e,o,n){function a(r,s){if(!o[r]){if(!e[r]){var c=r.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=o[r]={exports:{}};e[r][0].call(u.exports,function(t){return a(e[r][1][t]||t)},u,u.exports,t,e,o,n)}return o[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({ComUIBg:[function(t,e,o){"use strict";cc._RF.push(e,"93e00PsHqBJBZRcYsCBkeY6","ComUIBg"),cc.Class({extends:cc.Component,properties:{bgNode:{displayName:"\u80cc\u666f\u8282\u70b9",default:null,type:cc.Node}},onLoad:function(){this.node.on(cc.Node.EventType.TOUCH_START,function(t){return console.log(" ===== [popui] touch start  ==== "),t.stopPropagation(),t.stopPropagationImmediate(),!1}.bind(this)),this.node.on(cc.Node.EventType.TOUCH_END,function(t){console.log(" ===== [popui] touch end ==== "),void 0!=this.childNode&&this.childNode.emit("touchEvt",t),t.stopPropagation(),t.stopPropagationImmediate()}.bind(this)),this.node.on("hideBgLayer",this.hideBgLayer,this)},hideBgLayer:function(){this.bgNode.active=!1},addUI:function(t){var e=cc.instantiate(t);return e.x=0,e.y=0,e.parent=this.node,this.childNode=e,e},getUI:function(){return this.childNode},onDestroy:function(){this.node.off("hideBgLayer",this.hideBgLayer,this),this.childNode=null}}),cc._RF.pop()},{}],GlobalUtils:[function(t,e,o){"use strict";cc._RF.push(e,"2b39cCVGAxG9q8bhJfjxAGx","GlobalUtils");var n={formatValueToString:function(t){var e="0";return t>0&&t<1e4?e=t:t>=1e4&&t<1e7?e=Math.floor(t/100)/100+"\u4e07":t>=1e8&&(e=Math.floor(t/1e8)+"\u4ebf"),e},formatTimeToNormal:function(t){if(void 0==t||null==t)return"";var e=new Date(1e3*t),o=e.getFullYear(),n=e.getMonth()+1,a=e.getDate(),i=e.getHours(),r=e.getMinutes(),s=e.getSeconds();return cc.js.formatStr("%s-%s-%s  %s:%s:%s",o,this.formatTimeToTT(n),this.formatTimeToTT(a),this.formatTimeToTT(i),this.formatTimeToTT(r),this.formatTimeToTT(s))},formatTimeToTT:function(t){return t<10?"0"+t:t},formatTimeToDJS:function(t){if(void 0==t||null==t||t<=0)return"00:00:00";var e=Math.floor(t/3600),o=t-3600*e,n=Math.floor(o/60);return o=Math.floor(o-60*n),e<10&&(e="0"+e),n<10&&(n="0"+n),o<10&&(o="0"+o),cc.js.formatStr("%s:%s:%s",e,n,o)},getRandom:function(t,e){return t=parseFloat(t),e=parseFloat(e),Math.floor(Math.random()*(e-t+1)+t)}};e.exports=n,cc._RF.pop()},{}],TableCell:[function(t,e,o){"use strict";cc._RF.push(e,"9f6e0LSW4JPLr3dQhdTZGjX","TableCell");var n=cc.Class({extends:cc.Component,ctor:function(){this.data=null,this.index=-1},properties:{},updateCell:function(t,e){this.index=t,this.data=e},getCellIndex:function(){return this.index},dataChanged:function(){},onEnter:function(){},onLeave:function(){},onSelect:function(t){},onUnselect:function(){}});e.exports=n,cc._RF.pop()},{}],TableView:[function(t,e,o){"use strict";function n(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=a(t))){var e=0,o=function(){};return{s:o,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i,r=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,i=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw i}}}}function a(t,e){if(t){if("string"==typeof t)return i(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?i(t,e):void 0}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}cc._RF.push(e,"aa8d2YldXRCPpt3T+V1s4lj","TableView");var r=cc.Class({extends:cc.Component,ctor:function(){this._selectCellIndex},properties:{_allData:null,_totalCells:0,_cellWidth:0,_cellHeight:0,_scrollView:null,_content:null,_lastOffset:0,_bufferZone:0,_showCounts:0,_paddingSize:0,_bottomHandler:null,_bottomThisObj:null,_spacingOther:0,_needCreateCell:null,_horizontal:null,columeOrRow:{default:0,tooltip:"\u6ed1\u52a8\u65b9\u5411\u4e3ahorizontal\u65f6\uff0c\u8868\u793a\u6709\u591a\u5c11\u5217\u3002\u6ed1\u52a8\u65b9\u5411\u4e3avertical\u65f6\uff0c\u8868\u793a\u6709\u591a\u5c11\u884c"},oneCell:{default:null,type:cc.Prefab},_cellScriptName:cc.String},onEnable:function(){this.node.on("scrolling",this._scrollingCallBack,this)},onDisable:function(){this.node.off("scrolling",this._scrollingCallBack,this)},onDestroy:function(){this.node.off("scrolling",this._scrollingCallBack,this),this._scrollView.content.destroyAllChildren(),this._allData.splice(0,this._allData.length),this._scrollView=null,this._content=null,this._bottomHandler=null,this._bottomThisObj=null,this._needCreateCell=null},addScrollToBottomEventHandler:function(t,e){this._bottomHandler=t,this._bottomThisObj=e},initTableView:function(t,e,o){this._allData=t,this._totalCells=t.length,this._cellScriptName=e,null===this._scrollView&&(this._cellWidth=this.oneCell.data.width,this._cellHeight=this.oneCell.data.height,this._scrollView=this.node.getComponent(cc.ScrollView),this._content=this._scrollView.content,this._horizontal=this._scrollView.horizontal,this._paddingSize=this._horizontal?this._cellWidth:this._cellHeight,this.columeOrRow?this.columeOrRow<=0?this.columeOrRow=1:this.columeOrRow=Math.min(this.columeOrRow,this._judgeMaxColumnOrRowCounts()):this.columeOrRow=1,this._horizontal?(this._content.anchorX=0,this._content.anchorY=.5):(this._content.anchorX=.5,this._content.anchorY=1),this._updateContentSize(),this._scrollView.node.getComponent(cc.Widget)||this._content.getComponent(cc.Widget)||this._content.parent.getComponent(cc.Widget)?this.scheduleOnce(this._initTableView):this._initTableView())},reloadData:function(t){if(t&&!(t.length<=0)){var e=this._totalCells,o=this.columeOrRow-this._totalCells%this.columeOrRow;if(t=this._allData.concat(t),this._totalCells=t.length,this._allData=t,this._needCreateCell&&o>0){this._needCreateCell=!1;for(var n=e;n<e+o;n++)this._createCellObject(n)}this._updateContentSize()}},_judgeMaxColumnOrRowCounts:function(){var t=this._content.parent;if(this._horizontal){var e=Math.floor(t.height/this._cellHeight);return this._spacingOther=(t.height-e*this._cellHeight)/(e-1),e}var o=Math.floor(t.width/this._cellWidth);return this._spacingOther=(t.width-o*this._cellWidth)/(o-1),o},_initTableView:function(){var t=this._content.parent,e=this._horizontal?Math.ceil(t.width/this._cellWidth+1):Math.ceil(t.height/this._cellHeight+1);this._showCounts=Math.min(this._totalCells,e*this.columeOrRow),this._bufferZone=this._horizontal?.5*t.width+this._cellWidth:.5*t.height+this._cellHeight;var o=0;this.schedule(function t(e){this._createCellObject(o),(o+=1)===this._showCounts&&this.unschedule(t)},0,this._showCounts,0)},_updateContentSize:function(){var t=Math.ceil(this._totalCells/this.columeOrRow);this._horizontal?this._content.width=t*this._cellWidth:this._content.height=t*this._cellHeight},_scrollingCallBack:function(){var t=this._scrollView.getScrollOffset(),e=this._horizontal?t.x:t.y;this._lastOffset>e?this._horizontal?this._updateCellStatusByStart():this._updateCellStatusByEnd():this._horizontal?this._updateCellStatusByEnd():this._updateCellStatusByStart(),this._lastOffset=e},_getPositionInView:function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this._scrollView.node.convertToNodeSpaceAR(e)},_updateCellStatusByStart:function(){for(var t,e,o,n,a=this._allData,i=this._cellScriptName,r=this._content.children,s=r.length,c=this._bufferZone,l=this._paddingSize*Math.ceil(s/this.columeOrRow),u=0;u<s;u++)if(t=r[u],n=this._getPositionInView(t),this._horizontal&&n.x<-c||!this._horizontal&&Math.ceil(n.y)>=c)if((o=(e=t.getComponent(i)).getCellIndex()+s)<this._totalCells){e.onLeave();var h=this._horizontal?t.x+l:t.y-l;this._updateCellPos(t,o,h),e.updateCell(o,a[o]),e.dataChanged(),e.onEnter(),o===this._totalCells-1&&this._bottomHandler&&(this._needCreateCell=!1,this._bottomHandler.call(this._bottomThisObj))}else o==this._totalCells+this.columeOrRow-1&&this._bottomHandler&&(this._needCreateCell=!0,this._bottomHandler.call(this._bottomThisObj));a=null},_updateCellStatusByEnd:function(){for(var t,e,o=this._allData,n=this._cellScriptName,a=this._content.children,i=a.length,r=this._bufferZone,s=this._paddingSize*Math.ceil(i/this.columeOrRow),c=i-1;c>=0;c--)if((t=a[c]).getBoundingBoxToWorld(),e=this._getPositionInView(t),this._horizontal&&e.x>r&&t.x-s>0||!this._horizontal&&e.y<-r&&t.y+s<0){var l=t.getComponent(n);l.onLeave();var u=l.getCellIndex()-i,h=this._horizontal?t.x-s:t.y+s;this._updateCellPos(t,u,h),l.updateCell(u,o[u]),l.dataChanged(),l.onEnter()}o=null},_createCellObject:function(t){var e=cc.instantiate(this.oneCell);e.parent=this._content,this._updateCellPos(e,t);var o=e.getComponent(this._cellScriptName);o.updateCell(t,this._allData[t]),o.dataChanged(),e.on(cc.Node.EventType.TOUCH_END,this._onCellTouched,this)},_updateCellPos:function(t,e,o){var n=this._paddingSize;if(this.columeOrRow<2)this._horizontal?(t.x=o||n/2+e*n,t.y=0):(t.x=0,t.y=o||-n/2-e*n);else{var a=this.columeOrRow,i=e%a,r=Math.floor(e/a);this._horizontal?(t.x=n*(.5+r),t.y=.5*this._content.height-this._cellHeight*(.5+i)-this._spacingOther*i):(t.x=.5*-this._content.width+this._cellWidth*(.5+i)+this._spacingOther*i,t.y=-n*(.5+r))}},_onCellTouched:function(t){var e=t.target.getComponent(this._cellScriptName);if(this._selectCellIndex&&this._selectCellIndex!=e.index){var o=this._findDisplayCellByIndex(this._selectCellIndex);o&&o.getComponent(this._cellScriptName).onUnselect()}this._selectCellIndex=e.index,e.onSelect(t.getLocation())},_findDisplayCellByIndex:function(t){if(t){var e,o=this._content.children,a=this._cellScriptName,i=n(o);try{for(i.s();!(e=i.n()).done;){var r=e.value;if(r.getComponent(a).index==t)return r}}catch(t){i.e(t)}finally{i.f()}return o=null,null}return null}});cc.TableView=e.exports=r,cc._RF.pop()},{}],Toast:[function(t,e,o){"use strict";cc._RF.push(e,"5f103OVE9lN3LOEzG6Mj7+3","Toast");var n={makeText:function(t,e){var o,a;return new function(t,e){o=t,a=e,this.show=function(){if(void 0!==n.bgSpriteFrame){var t=cc.director.getScene();if(void 0===n.curWidth||void 0===n.curHeight){var e=cc.view.getVisibleSize();n.curWidth=e.width,n.curHeight=e.height}void 0===a&&(a=2);var i=new cc.Node,r=new cc.Node,s=r.addComponent(cc.Label);s.horizontalAlign=cc.Label.HorizontalAlign.CENTER,s.verticalAlign=cc.Label.VerticalAlign.CENTER,s.fontSize=30,s.string=o;var c=i.addComponent(cc.Sprite);c.type=cc.Sprite.Type.SLICED;var l=i.addComponent(cc.Layout);l.resizeMode=cc.Layout.ResizeMode.CONTAINER;var u=s.fontSize/2;l.paddingLeft=u,l.paddingRight=u,l.paddingTop=10,l.paddingBottom=10,o.length*s.fontSize>n.curWidth/2&&(r.width=n.curWidth/2,s.overflow=cc.Label.Overflow.RESIZE_HEIGHT),n.bgSpriteFrame&&(c.spriteFrame=n.bgSpriteFrame),r.x=n.curWidth/2,r.y=n.curHeight/2,i.addChild(r),t.addChild(i),cc.tween(i).to(a,{position:cc.v2(0,0)},{easing:"sineIn"}).call(function(){i.destroy()}).start()}else{var h=this;cc.loader.loadRes("common/bg_toast",function(t,e){t||(n.bgSpriteFrame=new cc.SpriteFrame(e),n.bgSpriteFrame.insetTop=4,n.bgSpriteFrame.insetBottom=4,n.bgSpriteFrame.insetLeft=4,n.bgSpriteFrame.insetRight=4,h.show())})}}}(t,e)},showText:function(t,e){n.makeText(t,e).show()}};e.exports=n,cc._RF.pop()},{}],UIUtils:[function(t,e,o){"use strict";cc._RF.push(e,"80876OIVLhHqZA3fF2gw1Ab","UIUtils");var n=t("Toast");window.UIUtils=e.exports={_uiMap:{},_uiStack:[],_sceneName:null,_sceneParams:{},_cachedPrefab:{},_keyDownTm:null,_evtTarget:new cc.EventTarget,removeFromStack:function(t,e,o,n){if(void 0!=e){if(o&&void 0!=o){for(var a=t.length-1;a>=0;a--)if(t[a].name===e&&t[a].uuid===o)return t.splice(a,1),o}else for(var i=!1,r=t.length-1;r>=0;r--)if(i=!1,t[r].name===e&&(i=!0,void 0!=n&&(i=t[r].subName===n)),i){var s=t[r].uuid;return t.splice(r,1),s}return null}},loadPrefab:function(t,e){if(this._cachedPrefab[t]){if(void 0===e)return;e(this._cachedPrefab[t])}else cc.loader.loadRes("prefabs/"+t,cc.Prefab,function(o,n){o?console.log("[UIMgr] \u65e0\u6cd5\u521b\u5efaPrefab: "+t):(this._cachedPrefab[t]=n,void 0!==e&&e(n))}.bind(this))},clearCachedPrefab:function(t){void 0!==t&&this._cachedPrefab[t]&&(this._cachedPrefab[t].destroy(),delete this._cachedPrefab[t])},createPrefabAddToRunningScene:function(t,e,o,n,a){cc.loader.loadRes("prefabs/ComUIBg",cc.Prefab,function(i,r){if(null!=r&&void 0!==r)if(this.hasPopUI(o,a))console.log("\u4e0d\u80fd\u91cd\u590d\u6253\u5f00\u540c\u4e00\u4e2apop\u591a\u6b21:  "+o);else{var s=cc.instantiate(r),c=s.getComponent("ComUIBg");if(c){var l=c.addUI(t),u=l.uuid.toString();this._uiMap[u]={rootNode:s,params:n,name:o,subName:a},this._uiStack.push({uuid:u,name:o,subName:a});var h=cc.director.getScene();if(h){var g=cc.view.getVisibleSize();s.x=g.width/2,s.y=g.height/2,h.addChild(s),e&&void 0!=e&&e(l)}else console.log("[UIMgr] \u6ca1\u6709\u8fd0\u884cScene, \u65e0\u6cd5\u6dfb\u52a0UI\u754c\u9762!");c.childNode.on("navBack",function(t,e){this.removeStackByUUID(c.getUI().uuid.toString(),o)}.bind(this))}}else console.log("load [ComUIBg] failed ",i.errorMessage)}.bind(this))},destroyUI:function(t){if(void 0!==t&&void 0!==t.node){var e=t.node.uuid.toString();this.removeStackByUUID(e,t.node.name)}},removeStackByUUID:function(t,e){void 0!=t&&null!=t&&(this._uiMap[t]&&void 0!=this._uiMap[t]&&void 0!=this._uiMap[t].rootNode?(this.removeFromStack(this._uiStack,this._uiMap[t].name,t),this._uiMap[t].rootNode.destroy(),delete this._uiMap[t]):console.log("Can not destroy : "+e))},getParams:function(t,e){if(!0===e)return this._sceneParams;if(void 0!=t&&void 0!=t.node){var o=t.node.uuid.toString();return this._uiMap[o].params}console.log("[UIMgr] "+t.name+"\u6ca1\u6709\u4f20\u5165\u6570\u636e")},closePopUI:function(t,e){var o=this.removeFromStack(this._uiStack,t,null,e);null!=o&&void 0!=this._uiMap[o]&&(this._uiMap[o].rootNode.destroy(),delete this._uiMap[o])},closeAllPopUI:function(){for(var t in this._uiMap)this._uiMap[t]&&void 0!=this._uiMap[t].rootNode&&(this._uiMap[t].rootNode.destroy(),delete this._uiMap[uuid]);this._uiStack.splice(0,this._uiStack.length)},openPopUI:function(t,e,o,n){void 0!==t&&(void 0!=this._cachedPrefab[t]?this.createPrefabAddToRunningScene(this._cachedPrefab[t],o,t,e,n):cc.loader.loadRes("prefabs/"+t,cc.Prefab,function(a,i){null!=i?(this._cachedPrefab[t]=i,this.createPrefabAddToRunningScene(i,o,t,e,n)):cc.log("[UIMgr] \u65e0\u6cd5\u521b\u5efaPrefab: "+t)}.bind(this)))},hasPopUI:function(t,e){for(var o in this._uiMap)if(this._uiMap[o]&&this._uiMap[o].name===t&&this._uiMap[o].subName===e)return!0;return!1},openSceneUI:function(t,e,o){if(console.log(" [SCENE OPEN]  :  "+t),null==this._sceneName||this._sceneName!==t){for(var n in this._uiMap)void 0!=this._uiMap[n]&&delete this._uiMap[n];this._uiStack.splice(0,this._uiStack.length),this._sceneName=t,this._sceneParams=void 0!=e?e:{},cc.director.preloadScene(t,o,function(){cc.director.loadScene(t)}),cc.sys.os==cc.sys.OS_ANDROID&&"loginScene"===t&&(cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.handleNavBack,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.handleNavBack,this))}else console.log(" scene is under opening !")},handleNavBack:function(t){if(Number(t.keyCode)==Number(cc.macro.KEY.back)){var e=(new Date).getTime();if(!(this._keyDownTm&&void 0!==this._keyDownTm&&Math.abs(e-this._keyDownTm)<500)){this._keyDownTm=e;var o=this._uiStack.length;o>0?this.sendUIMsg(this._uiStack[o-1].name,"navBack"):this.sendUIMsg("root","navBack")}}},showToast:function(t,e){n.showText(t,e)},clearAllUIMgrData:function(){for(var t in this._uiMap)this._uiMap[t]&&void 0!=this._uiMap[t].rootNode&&(this._uiMap[t].rootNode.destroy(),delete this._uiMap[uuid]);for(var e in this._cachedPrefab)this.clearCachedPrefab(e);this._uiMap={},this._uiStack=[],this._sceneName=null,this._sceneParams={},this._cachedPrefab={},this._keyDownTm=null},listenEvt:function(t,e,o){this.hasListenEvt(t)||this._evtTarget.on(t,e,o)},unListenEvt:function(t,e,o){this.hasListenEvt(t)&&this._evtTarget.off(t,e,o)},dispatchEvt:function(t,e){this._evtTarget.emit(t,e)},hasListenEvt:function(t){return this._evtTarget.hasEventListener(t)}},cc._RF.pop()},{Toast:"Toast"}],app:[function(t,e,o){"use strict";cc._RF.push(e,"9ac20ktOltBm43YQ5LeaoxE","app"),cc.Class({extends:cc.Component,properties:{globalNode:{default:null,type:cc.Node}},onLoad:function(){cc.game.addPersistRootNode(this.globalNode)},start:function(){UIUtils.openSceneUI("loginScene")}}),cc._RF.pop()},{}],gameScene:[function(t,e,o){"use strict";cc._RF.push(e,"60b0ddDgmdHSbW1GII4G7p8","gameScene"),cc.Class({extends:cc.Component,properties:{_params:null},onLoad:function(){this._params=UIUtils.getParams(this,!0),cc.log("---== _params_params is %s ==---",this._params),this.initAgoraEvents()},onDestroy:function(){this.uninitAgoraEvents()},initAgoraEvents:function(){agora&&agora.on("leave-channel",this.onLeaveChannel,this)},uninitAgoraEvents:function(){agora&&agora.off("leave-channel",this.onLeaveChannel)},onLeaveChannel:function(t){UIUtils.openSceneUI("loginScene")},exitCallBack:function(){agora&&agora.leaveChannel()}}),cc._RF.pop()},{}],"js-agora":[function(t,e,o){"use strict";cc._RF.push(e,"aefc4m3rEBGrZ1Pl4Yx4yKI","js-agora"),window.agora=new cc.EventTarget,agora.startTime=null,"undefined"!=typeof agoraCreator&&(null==agora.agoraCreatorInst&&(agora.agoraCreatorInst=new agoraCreator),agora.init=function(t){agora.agoraCreatorInst.initialize(t),agora.agoraCreatorInst.onJoinChannelSuccess=function(t,e,o){agora.startTime=new Date,cc.log("Agora(Native platform) service start using time : "+agora.startTime.toString()),agora.emit("join-channel-success",t,e,o)},agora.agoraCreatorInst.onRejoinChannelSuccess=function(t,e,o){agora.emit("rejoin-channel-success",t,e,o)},agora.agoraCreatorInst.onWarning=function(t,e){agora.emit("warning",t,e)},agora.agoraCreatorInst.onError=function(t,e){agora.emit("error",t,e)},agora.agoraCreatorInst.onAudioQuality=function(t,e,o,n){agora.emit("audio-quality",t,e,o,n)},agora.agoraCreatorInst.onAudioVolumeIndication=function(t,e,o){agora.emit("audio-volume-indication",t,e,o)},agora.agoraCreatorInst.onLeaveChannel=function(t){var e=new Date;cc.log("Agora(Native platform) service stop use time : "+e.toString());var o=e-agora.startTime;cc.log("Agora(Native platform) service used time(s) \uff1a "+Math.floor(o/1e3)),agora.emit("leave-channel",t)},agora.agoraCreatorInst.onNetworkQuality=function(t,e,o){agora.emit("network-quality",t,e,o)},agora.agoraCreatorInst.onUserJoined=function(t,e){agora.emit("user-joined",t,e)},agora.agoraCreatorInst.onUserOffline=function(t,e){agora.emit("user-offline",t,e)},agora.agoraCreatorInst.onUserMuteAudio=function(t,e){agora.emit("user-mute-audio",t,e)},agora.agoraCreatorInst.onAudioRoutingChanged=function(t){agora.emit("audio-routing-changed",t)},agora.agoraCreatorInst.onConnectionLost=function(){agora.emit("connection-lost")},agora.agoraCreatorInst.onConnectionInterrupted=function(){agora.emit("connection-interrupted")},agora.agoraCreatorInst.onRequestToken=function(){agora.emit("request-token")},agora.agoraCreatorInst.onConnectionBanned=function(){agora.emit("connection-banned")},agora.agoraCreatorInst.onClientRoleChanged=function(t,e){agora.emit("client-role-changed",t,e)}},agora.setChannelProfile=function(t){return agora.agoraCreatorInst.setChannelProfile(t)},agora.setClientRole=function(t){return agora.agoraCreatorInst.setClientRole(t)},agora.joinChannel=function(t,e,o,n){return agora.agoraCreatorInst.joinChannel(t,e,o,n)},agora.leaveChannel=function(){return agora.agoraCreatorInst.leaveChannel()},agora.enableAudio=function(){return agora.agoraCreatorInst.enableAudio()},agora.disableAudio=function(){return agora.agoraCreatorInst.disableAudio()},agora.muteLocalAudioStream=function(t){return agora.agoraCreatorInst.muteLocalAudioStream(t)},agora.enableLocalAudio=function(t){return agora.agoraCreatorInst.enableLocalAudio(t)},agora.muteAllRemoteAudioStreams=function(t){return agora.agoraCreatorInst.muteAllRemoteAudioStreams(t)},agora.muteRemoteAudioStream=function(t,e){return agora.agoraCreatorInst.muteRemoteAudioStream(t,e)},agora.enableAudioVolumeIndication=function(t,e){return agora.agoraCreatorInst.enableAudioVolumeIndication(t,e)},agora.adjustRecordingSignalVolume=function(t){return agora.agoraCreatorInst.adjustRecordingSignalVolume(t)},agora.adjustPlaybackSignalVolume=function(t){return agora.agoraCreatorInst.adjustPlaybackSignalVolume(t)},agora.setDefaultAudioRouteToSpeakerphone=function(t){agora.agoraCreatorInst.setDefaultAudioRouteToSpeakerphone(t)},agora.setParameters=function(t){agora.agoraCreatorInst.setParameters(t)},agora.getVersion=function(){return agora.agoraCreatorInst.getVersion()},agora.setLogFile=function(t){return agora.agoraCreatorInst.setLogFile(t)},agora.setLogFilter=function(t){return agora.agoraCreatorInst.setLogFilter(t)}),"undefined"!=typeof AgoraRTC&&(AgoraRTC.checkSystemRequirements()||alert("Your browser does not support WebRTC!"),null==agora.client&&(agora.client=AgoraRTC.createClient({mode:"live",codec:"h264"})),agora.init=function(t){agora.remoteStreams=[],agora.client.init(t,function(){agora.emit("init-success"),agora.client.on("volume-indicator",function(t){var e=[],o=0;t.attr.forEach(function(t,n){e.push({uid:t.uid,volume:t.level}),o+=t.level}),agora.emit("audio-volume-indication",e,e.length,o/e.length)}),agora.client.on("peer-leave",function(t){if(t.stream){var e=t.stream.getId();t.stream.stop(),agora.remoteStreams=agora.remoteStreams.filter(function(t){return t.getId()!==e})}}),agora.client.on("stream-added",function(t){var e=t.stream;agora.client.subscribe(e,function(t){agora.emit("error",t,"Subscribe stream failed")}),agora.emit("user-joined",e.getId(),null)}),agora.client.on("stream-subscribed",function(t){var e=t.stream;console.log("Subscribe remote stream successfully: "+e.getId()),agora.remoteStreams.push(e),e.play("Cocos2dGameContainer")}),agora.client.on("stream-removed",function(t){if(t.stream){var e=t.stream.getId();t.stream.stop(),agora.remoteStreams=agora.remoteStreams.filter(function(t){return t.getId()!==e}),agora.emit("user-offline",stream.getId(),null)}}),agora.client.on("mute-audio",function(t){agora.emit("user-mute-audio",t.uid,!0)}),agora.client.on("unmute-audio",function(t){agora.emit("user-mute-audio",t.uid,!1)}),agora.client.on("recordingDeviceChanged",function(t){agora.emit("recording-device-changed",t.state,t.device)}),agora.client.on("onTokenPrivilegeWillExpire",function(){agora.emit("request-token")}),agora.client.on("client-banned",function(t){agora.emit("connection-interrupted")}),agora.client.on("client-role-changed",function(t){agora.emit("client-role-changed",t.role)}),agora.client.on("error",function(t){agora.emit("error",t,t.reason)})},function(t){agora.emit("error",t,"client init failed!")})},agora.setChannelProfile=function(t){cc.log("web not support")},agora.setClientRole=function(t){agora.stream.setClientRole(t)},agora.joinChannel=function(t,e,o,n){agora.client.join(t,e,n,function(t){null==agora.stream&&(agora.stream=AgoraRTC.createStream({streamID:t,audio:!0,video:!1,screen:!1})),agora.stream.init(function(){console.log("getUserMedia successfully"),agora.stream.play("Cocos2dGameContainer"),agora.client.publish(agora.stream,function(t){console.log("Publish local stream error: "+t)}),agora.client.on("stream-published",function(t){console.log("Publish local stream successfully")})},function(t){console.log("getUserMedia failed",t)}),console.log("create stream!"),agora.startTime=new Date,cc.log("Agora(Web platform) service start using time : "+agora.startTime.toString()),agora.emit("join-channel-success",e,t,null)},function(t){agora.emit("error",t,"join channel failed!")})},agora.leaveChannel=function(){agora.client.leave(function(){var t=new Date;cc.log("Agora(Web platform) service stop use time : "+t.toString());var e=t-agora.startTime;cc.log("Agora(Web platform) service used time(s) \uff1a "+Math.floor(e/1e3)),agora.emit("leave-channel",null),agora.stream.close(),agora.stream=null},function(t){agora.emit("error",t,"leave channel failed!")})},agora.enableAudio=function(){agora.stream.unmuteAudio()},agora.disableAudio=function(){agora.stream.muteAudio()},agora.muteLocalAudioStream=function(t){t?agora.stream.disableAudio():agora.stream.enableAudio()},agora.enableLocalAudio=function(t){var e=agora.stream.getAudioTrack();t?agora.stream.addTrack(e):agora.stream.removeTrack(e)},agora.muteAllRemoteAudioStreams=function(t){agora.remoteStreams.forEach(function(e){t?e.muteAudio():e.unmuteAudio()})},agora.muteRemoteAudioStream=function(t,e){agora.remoteStreams.forEach(function(o){t===o.getId()&&(e?o.muteAudio():o.unmuteAudio())})},agora.enableAudioVolumeIndication=function(t,e){agora.client.enableAudioVolumeIndicator()},agora.adjustRecordingSignalVolume=function(t){cc.log("web not support")},agora.adjustPlaybackSignalVolume=function(t){cc.log("web not support")},agora.setDefaultAudioRouteToSpeakerphone=function(t){cc.log("web not support")},agora.setParameters=function(t){cc.log("web not support")},agora.getVersion=function(){return AgoraRTC.VERSION},agora.setLogFile=function(t){cc.log("web not support")},agora.setLogFilter=function(t){AgoraRTC.logger.setLogLevel(t)}),"undefined"==typeof agoraCreator&&"undefined"==typeof AgoraRTC&&(agora.init=function(t){},agora.setChannelProfile=function(t){},agora.setClientRole=function(t){},agora.joinChannel=function(t,e,o,n){},agora.leaveChannel=function(){},agora.enableAudio=function(){},agora.disableAudio=function(){},agora.muteLocalAudioStream=function(t){},agora.enableLocalAudio=function(t){},agora.muteAllRemoteAudioStreams=function(t){},agora.muteRemoteAudioStream=function(t,e){},agora.enableAudioVolumeIndication=function(t,e){},agora.adjustRecordingSignalVolume=function(t){},agora.adjustPlaybackSignalVolume=function(t){},agora.setDefaultAudioRouteToSpeakerphone=function(t){},agora.setParameters=function(t){},agora.getVersion=function(){},agora.setLogFile=function(t){},agora.setLogFilter=function(t){}),cc._RF.pop()},{}],loginScene:[function(t,e,o){"use strict";cc._RF.push(e,"161f51Bsq9GZ7FwPCM+UR9u","loginScene");var n=t("GlobalUtils");cc.Class({extends:cc.Component,properties:{_channelId:null,_userId:null},onLoad:function(){this.initAgora()},initAgora:function(){var t="f6764c661f864a6f9444865928a922ea";agora&&agora.init(t),this.initAgoraEvents(),this._channelId="yyhd678",this._userId=n.getRandom(1e7,99999999),cc.log("---== this._userId is %s ==---",this._userId),console.log("Step 1: Init Agora Engine"),console.log("Init agora, appid: "+t),console.log("Init engine success!"),console.log("\r\n\r\n"),console.log("Step 2: Join Channel")},joinCallBack:function(){cc.log("---== this._channelId ==--- %s",this._channelId),agora&&agora.joinChannel("",this._channelId)},initAgoraEvents:function(){agora&&(agora.on("init-success",this.onInitSuccess,this),agora.on("join-channel-success",this.onJoinChannelSuccess,this),agora.on("rejoin-channel-success",this.onRejoinChannelSuccess,this),agora.on("warning",this.onWarning,this),agora.on("error",this.onError,this),agora.on("audio-quality",this.onAudioQuality,this),agora.on("audio-volume-indication",this.onAudioVolumeIndication,this),agora.on("network-quality",this.onNetworkQuality,this),agora.on("user-joined",this.onUserJoined,this),agora.on("user-offline",this.onUserOffline,this),agora.on("user-mute-audio",this.onUserMuteAudio,this),agora.on("audio-routing-changed",this.onAudioRoutingChanged,this),agora.on("connection-lost",this.onConnectionLost,this),agora.on("connection-interrupted",this.onConnectionInterrupted,this),agora.on("request-token",this.onRequestToken,this),agora.on("connection-banned",this.onConnectionBanned,this),agora.on("client-role-changed",this.onClientRoleChanged,this))},onDestroy:function(){this.uninitAgoraEvents()},uninitAgoraEvents:function(){agora&&(agora.off("init-success",this.onInitSuccess,this),agora.off("join-channel-success",this.onJoinChannelSuccess),agora.off("rejoin-channel-success",this.onRejoinChannelSuccess,this),agora.off("warning",this.onWarning,this),agora.off("error",this.onError,this),agora.off("audio-quality",this.onAudioQuality,this),agora.off("audio-volume-indication",this.onAudioVolumeIndication,this),agora.off("network-quality",this.onNetworkQuality,this),agora.off("user-joined",this.onUserJoined,this),agora.off("user-offline",this.onUserOffline,this),agora.off("user-mute-audio",this.onUserMuteAudio,this),agora.off("audio-routing-changed",this.onAudioRoutingChanged,this),agora.off("connection-lost",this.onConnectionLost,this),agora.off("connection-interrupted",this.onConnectionInterrupted,this),agora.off("request-token",this.onRequestToken,this),agora.off("connection-banned",this.onConnectionBanned,this),agora.off("client-role-changed",this.onClientRoleChanged,this))},onInitSuccess:function(){var t={channelId:this._channelId,userId:this._userId};cc.log("---== params 11111 is %s ==---",t)},onJoinChannelSuccess:function(t,e,o){var n={channelId:this._channelId,userId:this._userId};UIUtils.openSceneUI("gameScene",n)},onRejoinChannelSuccess:function(t,e,o){},onWarning:function(t,e){},onError:function(t,e){},onAudioQuality:function(t,e,o,n){cc.log("onAudioQuality, uid: "+t+" quality: "+e+" delay: "+o+" lost: "+n)},onAudioVolumeIndication:function(t,e,o){cc.log("[js]onAudioVolumeIndication, speakerNumber: %s, totalVolume: %s!",e,o);for(var n=0;n<e;n++){if(0==t[n].uid&&1==e)return void cc.log("[js]onAudioVolumeIndication, Local Speaker: [%s], uid: %s, volume: %s",n,t[n].uid,t[n].volume);cc.log("[js]onAudioVolumeIndication, Remote Speaker: [%s], uid: %s, volume: %s",n,t[n].uid,t[n].volume)}},onNetworkQuality:function(t,e,o){cc.log("onNetworkQuality, uid: "+t+" txQuality: "+e+" rxQuality: "+o)},onUserJoined:function(t,e){cc.log("onUserJoined, uid: "+t+" elapsed: "+e)},onUserOffline:function(t,e){cc.log("onUserOffline, uid: "+t+" reason: "+e)},onUserMuteAudio:function(t,e){cc.log("onUserMuteAudio, uid: "+t+" muted: "+e)},onAudioRoutingChanged:function(t){},onConnectionLost:function(){},onConnectionInterrupted:function(){},onRequestToken:function(){},onConnectionBanned:function(){},onClientRoleChanged:function(t,e){}}),cc._RF.pop()},{GlobalUtils:"GlobalUtils"}]},{},["js-agora","app","ComUIBg","TableCell","TableView","Toast","gameScene","loginScene","GlobalUtils","UIUtils"]);